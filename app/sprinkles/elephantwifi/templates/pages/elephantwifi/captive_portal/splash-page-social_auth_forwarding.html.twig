{% extends "pages/elephantwifi/captive_portal/base/layout-captive-portal.html.twig" %}

{% block page %}
    {% set page = page | merge({
        "title" : "Social login - redirect",
        "description" : "Captive portal page for social auth redirect"
    }) %}
    {{ parent() }}
{% endblock %}

{% block content %}
<div class="col-xs-12 col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4">
    <div class="panel panel-default">
        <div class="panel-body">
            <div>
                {% if unifi_venue.venue_wifi.custom_css.custom_logo_file_uuid != ''  %}
                    <img src="{{site.uri.public}}/assets-raw/images/captive_portal/custom/logo/{{unifi_venue.id}}/{{unifi_venue.venue_wifi.custom_css.custom_logo_file_uuid}}/{{unifi_venue.venue_wifi.custom_css.custom_logo_file_name}}" class="center-block img-responsive" alt="Logo">
                {% else %}
                    <img src="{{site.uri.public}}/assets-raw/images/captive_portal/logo.png" class="center-block img-responsive" alt="Logo">
                {% endif %}
            </div>
            <div id="header">
                <div style="text-align: center">
                    <h3>{{unifi_venue.venue_wifi.text_labels.heading}}</h3>
                </div>
            </div>
            <div style="text-align: center">
                <h4>Please be patient while we communicate with Facebook</h4>
            </div>
            <br>
            <div style="text-align: center">
			    <h4><i class="fas fa-circle-notch fa-spin"></i> {{unifi_venue.venue_wifi.text_labels.social_auth_connecting_pre_provider}} {{providername}}</h4>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block page_scripts %}
<script type="text/javascript">
/**
 * place in seperate js file when done (these should be loaded as last)
 * - leave a small bit of code in this template that loads the variables/arrays from twig variables
 */
$(document).ready(function() {
    /**
     * Load the data required in the js for this page into variables for later use
     * NOTE: take care not to load sensitive data here!
     */
    var url = '{{url | raw}}';

    /**
     * when page is ready, the client is redirected to the social auth provider through our "forwarder"
     */
    window.location.href = url;
});
</script>
{% endblock %}